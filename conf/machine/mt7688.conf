#@TYPE: Machine
#@NAME: mt7688
#@DESCRIPTION: MIPS 32r2, Little Endian, Soft Float

require conf/machine/include/qemu.inc
require conf/machine/include/qemuboot-mips.inc
require conf/machine/include/mips/tune-mips-24k.inc
require mips-common.inc

DEFAULTTUNE = "mips32r2el-24kc"

MACHINE_FEATURES = "alsa usbhost wifi serial vfat"
MACHINE_EXTRA_RRECOMMENDS = " kernel-modules kernel-devicetree"
# IMAGE_INSTALL_append = " kernel-devicetree"

PREFERRED_PROVIDER_virtual/kernel = "linux-yocto"
PREFERRED_VERSION_virtual/kernel = "4.14%"

# kernel-image
KERNEL_IMAGETYPE = "uImage"
# KERNEL_ALT_IMAGETYPE = "vmlinux"
KERNEL_IMAGE_STRIP_EXTRA_SECTIONS  = ".comment"

# used by sysvinit_2
SERIAL_CONSOLES ?= "115200;ttyS0"
USE_VT ?= "0"


# Use the same for the time being
PREFERRED_PROVIDER_virtual/bootloader = "u-boot-mt7620"
UBOOT_MACHINE = "mt7260_config"
UBOOT_ENTRYPOINT = "0x20008000"
UBOOT_LOADADDRESS = "0x20008000"

ROOT_FLASH_SIZE = "64"

# Add "ubi" bellow to include it to the build
IMAGE_FSTYPES += " tar.gz jffs2"
# Remove line below to allow building ubi rootfs
IMAGE_TYPES_MASKED ?= "ubi ubifs"

# EXTRA_IMAGECMD_jffs2 = "--no-cleanmarkers --little-endian --eraseblock=131072"
EXTRA_IMAGECMD_jffs2 = "--little-endian --eraseblock=65536"

# NAND
MKUBIFS_ARGS = " -e 0x1f000 -c 2048 -m 0x800  -x lzo"
UBINIZE_ARGS = " -m 0x800 -p 0x20000 -s 2048"

#UBI_VOLNAME = "rootfs"


