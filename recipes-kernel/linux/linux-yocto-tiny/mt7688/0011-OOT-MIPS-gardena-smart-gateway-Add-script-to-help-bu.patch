From b6dd85dc9166076270e07c21709a5a571901ece6 Mon Sep 17 00:00:00 2001
From: Stefan Roese <sr@denx.de>
Date: Sat, 1 Dec 2018 10:13:19 +0100
Subject: [PATCH] OOT: MIPS: gardena-smart-gateway: Add script to help building

Signed-off-by: Stefan Roese <sr@denx.de>
---
 build-gardena-smart-gateway.sh | 34 ++++++++++++++++++++++++++++++++++
 1 file changed, 34 insertions(+)
 create mode 100755 build-gardena-smart-gateway.sh

diff --git a/build-gardena-smart-gateway.sh b/build-gardena-smart-gateway.sh
new file mode 100755
index 000000000000..884d4d5b6215
--- /dev/null
+++ b/build-gardena-smart-gateway.sh
@@ -0,0 +1,34 @@
+#!/bin/bash
+
+DEFCONFIG=gardena-smart-gateway_defconfig
+BOARD=gardena_smart_gateway_mt7688
+DESTDIR=/tftpboot/gardena
+DTB=ralink/$BOARD.dtb
+
+if [ "$1" == "savedefconfig"  ]
+then
+    echo make savedefconfig
+    make savedefconfig
+    cp defconfig arch/$ARCH/configs/$DEFCONFIG
+    exit 0
+fi
+
+if [ "$1" == "config"  ]
+then
+    echo make mrproper
+    make mrproper
+
+    echo make $DEFCONFIG ...
+    make $DEFCONFIG
+    echo ... done
+
+    sleep 1
+fi
+
+# build the image (vmlinux.bin) and dtb
+make -j$BUILD_CPUS vmlinux.bin
+make -j$BUILD_CPUS $DTB
+
+# generate FIT image and copy it to the dest directoy
+mkimage -f $BOARD.its $BOARD.itb
+cp $BOARD.itb $DESTDIR
