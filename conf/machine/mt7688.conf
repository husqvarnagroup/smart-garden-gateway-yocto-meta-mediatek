#@TYPE: Machine
#@NAME: mt7688
#@DESCRIPTION: MIPS 32r2, Little Endian, Soft Float

require conf/machine/include/qemu.inc
require conf/machine/include/qemuboot-mips.inc
require conf/machine/include/mips/tune-mips-24k.inc

DEFAULTTUNE = "mips32r2el-24kc"

MACHINE_FEATURES = "wifi serial"
MACHINE_EXTRA_RRECOMMENDS = " kernel-modules kernel-devicetree"
# IMAGE_INSTALL_append = " kernel-devicetree"

PREFERRED_PROVIDER_virtual/kernel = "linux-yocto"
PREFERRED_VERSION_virtual/kernel = "4.14%"

# New U-Boot: uImage.lzma (best compression)
# Old U-Boot: uImage.bin (no compression)
KERNEL_IMAGETYPE ?= "uImage.lzma"
KERNEL_ALT_IMAGETYPE ?= "uImage.bin"
KERNEL_IMAGE_STRIP_EXTRA_SECTIONS  = ".comment"

# used by sysvinit_2 and systemd
SERIAL_CONSOLES ?= "115200;ttyS0"
# used by sysvinit_2
USE_VT ?= "0"

PREFERRED_VERSION_u-boot = "mt7688-2018-09-07"
UBOOT_CONFIG ??= "ram rom"
UBOOT_CONFIG[rom] = "gardena-smart-gateway-mt7688_defconfig"
UBOOT_CONFIG[ram] = "gardena-smart-gateway-mt7688-ram_defconfig"
